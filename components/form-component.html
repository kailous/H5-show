<!-- 表单组件 -->

<!-- 样式 -->
<style>
    form {
        display: flex;
        flex-direction: column;
        gap: 2vh;
        position: relative;
        z-index: 100;
    }

    form .form-group {
        display: flex;
        flex-direction: column;
    }

    form .form-group input,
    form .form-group button {
        line-height: 100%;
        padding: 0.8em;
        border-radius: 15px;
        border: none;
    }

    form .form-group button {
        margin-top: 2em;
        background-color: #ffffff;
        color: #8437b7;
    }

    form .form-group label {
        padding: 0.8em 0;
        display: flex;
        align-items: center;
        height: 32px;
    }

    form .form-group .error-message span P {
        background-color: black;
        color: aliceblue;

        padding: 10px 15px;
        border-radius: 20px;
        line-height: 100%;
        margin: 0;
        position: relative;
        z-index: 2;
    }

    form .form-group .error-message span {
        position: relative;
        display: flex;
        align-items: center;
    }

    form .form-group .error-message span::after {
        content: '◆';
        color: black;
        font-size: 20px;
        position: absolute;
        left: -8px;
        z-index: 1;
        line-height: 100%;
    }
</style>
<!-- 页面结构 -->
<form class="contactForm" id="contactForm" action="." method="post" novalidate>
    <div class="form-group">
        <label for="name">
            姓名：
            <div class="error-message name-error" id="name-error"></div>
        </label>
        <input class="name" type="text" id="name" name="name" required placeholder="请输入您的姓名" />
    </div>

    <div class="form-group">
        <label for="phone">
            手机号码：
            <div class="error-message phone-error" id="phone-error"></div>
        </label>
        <input class="phone" type="tel" id="phone" name="phone" required pattern="^[1][3-9][0-9]{9}$"
            placeholder="请输入您的手机号码" />
    </div>

    <div class="form-group">
        <label for="company">
            企业名称：
            <div class="error-message company-error" id="company-error"></div>
        </label>
        <input class="company" type="text" id="company" name="company" required minlength="2" placeholder="请输入您的企业名称" />
    </div>

    <div class="form-group">
        <label for="number">
            随行人数：
            <div class="error-message number-error" id="number-error"></div>
        </label>
        <input class="number" type="number" id="number" name="number" placeholder="请输入随行人数" max="100" />
    </div>

    <div class="form-group">
        <button type="submit">提交</button>
    </div>
</form>
<script>
    // /js/components/form-components.js

// 添加表单验证事件监听器
// export default function Plugin_initFormValidation() {
    console.log('表单验证插件已加载');
    const contactForms = document.querySelectorAll('[id^="contactForm"]');
    
    contactForms.forEach(function (contactForm) {
        contactForm.addEventListener('submit', function (event) {
            event.preventDefault();
            validateForm(contactForm);
        });
    });

    function displayError(element, message) {
        element.innerHTML = ''; // 清空现有的错误信息
        const errorSpan = document.createElement('span'); // 创建span元素
        const errorP = document.createElement('p');    // 创建p元素
        errorP.textContent = message;                  // 设置错误信息文本
        errorSpan.appendChild(errorP);                 // 将p元素添加到span中
        element.appendChild(errorSpan);                // 将span元素添加到指定的元素中
    }

    function validateForm(form) {
        const name = form.querySelector('[id^="name"]');
        const phone = form.querySelector('[id^="phone"]');
        const company = form.querySelector('[id^="company"]');
        const number = form.querySelector('[id^="number"]');

        const nameError = form.querySelector('[id^="name-error"]');
        const phoneError = form.querySelector('[id^="phone-error"]');
        const companyError = form.querySelector('[id^="company-error"]');
        const numberError = form.querySelector('[id^="number-error"]');

        if (!name.value) {
            displayError(nameError, '忘记输入姓名啦～');
        }

        if (!phone.value) {
            displayError(phoneError, '忘记输入手机号码啦～');
        } else if (!/^[1][3-9][0-9]{9}$/.test(phone.value)) {
            displayError(phoneError, '这不是手机号码哦～');
        }

        if (!company.value) {
            displayError(companyError, '企业名称还没填呢');
        } else if (company.value.length < 2) {
            displayError(companyError, '要输入完整的企业名称哦～');
        }

        if (number.value && number.value > 100) {
            displayError(numberError, '不要逗我啦～ 这怎么可能～');
        }
    }
// };
// Plugin_initFormValidation();
// // export { Plugin_initFormValidation };
</script>